<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APE Factory - Generate Your Own Memecoin Instantly</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #ad5454;
            --primary-dark: #6c2bd9;
            --secondary: #ff5c8a;
            --dark: #1a1c23;
            --darker: #12141a;
            --light: #f8f9fa;
            --gray: #6b7280;
            --success: #31c48d;
            --danger: #f05252;
            --warning: #f59e0b;
            --primaryBlue: #ad5454;
            --primaryBlueHover: #2563eb;
            --primaryStroke: #2d3038;
            --secondaryStroke: #3d4048;
            --background: #12141a;
            --backgroundSecondary: #1a1c23;
            --textTertiary: #9ca3af;
            --primaryGreen: #10b981;
            --primaryRed: #ef4444;
            --decrease: #ef4444;
        }

        /* Portfolio Section */
        .portfolio-section {
            background-color: var(--darker);
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .portfolio-summary {
            display: flex;
            justify-content: space-between;
            background-color: var(--dark);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--primaryStroke);
        }
        
        .portfolio-value {
            font-size: 24px;
            font-weight: 700;
        }
        
        .portfolio-pnl {
            font-size: 16px;
            font-weight: 600;
        }
        
        .portfolio-pnl.up {
            color: var(--success);
        }
        
        .portfolio-pnl.down {
            color: var(--danger);
        }
        
        .portfolio-table {
            width: 100%;
            border-collapse: collapse;
            background-color: var(--dark);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--primaryStroke);
        }
        
        .portfolio-table th {
            background-color: var(--backgroundSecondary);
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .portfolio-table td {
            padding: 15px;
            border-bottom: 1px solid var(--primaryStroke);
        }
        
        .portfolio-table tr:last-child td {
            border-bottom: none;
        }
        
        .coin-cell {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .coin-icon-small {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Enhanced Coin Cards */
        .coin-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .coin-action-btn {
            flex: 1;
            padding: 8px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .coin-buy-btn {
            background-color: var(--success);
            color: white;
        }
        
        .coin-sell-btn {
            background-color: var(--danger);
            color: white;
        }
        
        .coin-action-btn:hover {
            opacity: 0.9;
        }
        
        /* Enhanced Balance Panel */
        .portfolio-balance {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--primaryStroke);
        }
        
        .balance-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .balance-label {
            color: var(--gray);
            font-size: 14px;
        }
        
        .balance-value {
            font-weight: 600;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Pixelify Sans", sans-serif;
        }
        
        body {
            background-color: var(--darker);
            color: var(--light);
            line-height: 1.5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* New Header Style */
        header {
            border-bottom: 1px solid var(--primaryStroke);
            overflow: hidden;
            height: 52px;
        }
        
        @media (min-width: 640px) {
            header {
                height: 64px;
            }
        }
        
        .header-content {
            display: flex;
            width: 100%;
            height: 100%;
            padding: 0 16px;
            gap: 16px;
            justify-content: space-between;
            align-items: center;
        }
        
        @media (min-width: 1024px) {
            .header-content {
                padding: 0 24px;
                gap: 24px;
            }
        }
        
.logo-container {
    display: flex;
    gap: 0;
    justify-content: flex-start;
    align-items: center;
    width: 326px;
}

@media (min-width: 1280px) {
    .logo-container {
        width: 158px;
    }
}

.logo-mark {
    width: 36px;
    height: 36px;
    display: flex;
    justify-content: center;
    align-items: center;
    background-image: url('a.png'); /* Make sure this image exists in your project */
    background-size: contain; /* Changed from cover to contain for better logo display */
    background-repeat: no-repeat;
    background-position: center;
    border-radius: 0%;
}

@media (min-width: 1280px) {
    .logo-mark {
        width: 50px;
        height: 50px;
    }
}

        .nav-links {
            display: none;
            flex: 1;
            gap: 4px;
        }
        
        @media (min-width: 640px) {
            .nav-links {
                display: flex;
            }
        }
        
        .nav-link {
            display: flex;
            height: 32px;
            padding: 0 8px;
            justify-content: flex-start;
            align-items: center;
            border-radius: 4px;
            transition: none;
            text-decoration: none;
            color: var(--light);
            font-size: 14px;
            font-weight: 500;
        }
        
        @media (min-width: 1280px) {
            .nav-link {
                padding: 0 14px;
            }
        }
        
        .nav-link:hover {
            background-color: rgba(59, 130, 246, 0.2);
            color: var(--primaryBlue);
            transition: background-color 135ms ease-in-out, color 135ms ease-in-out;
        }
        
        .nav-link.active {
            color: var(--primaryBlue);
        }
        
        .search-btn {
            display: none;
            flex-shrink: 0;
            white-space: nowrap;
            border: 1px solid var(--primaryStroke);
            height: 32px;
            padding: 0 8px;
            gap: 8px;
            justify-content: center;
            align-items: center;
            border-radius: 9999px;
            background: transparent;
            color: var(--light);
            cursor: pointer;
        }
        
        @media (min-width: 640px) {
            .search-btn {
                display: flex;
            }
        }
        
        @media (min-width: 1536px) {
            .search-btn {
                padding-left: 12px;
                padding-right: 6px;
            }
        }
        
        .search-btn:hover {
            background-color: rgba(45, 48, 56, 0.35);
        }
        
        .search-shortcut {
            display: none;
            border: 1px solid var(--primaryStroke);
            font-size: 12px;
            height: 20px;
            padding: 0 8px;
            justify-content: center;
            align-items: center;
            border-radius: 9999px;
        }
        
        @media (min-width: 1536px) {
            .search-shortcut {
                display: flex;
            }
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        @media (min-width: 640px) {
            .header-actions {
                gap: 16px;
            }
        }
        
        .mobile-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        @media (min-width: 640px) {
            .mobile-actions {
                display: none;
            }
        }
        
        .desktop-actions {
            display: none;
            align-items: center;
            gap: 8px;
        }
        
        @media (min-width: 640px) {
            .desktop-actions {
                display: flex;
                gap: 16px;
            }
        }
        
        @media (min-width: 1024px) {
            .desktop-actions {
                gap: 16px;
            }
        }
        
        .action-btn {
            background-color: var(--primaryStroke);
            width: 32px;
            height: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 9999px;
            border: none;
            color: var(--light);
            cursor: pointer;
        }
        
        .action-btn:hover {
            background-color: rgba(61, 64, 72, 0.8);
        }
        
        .deposit-btn {
            display: none;
            background-color: var(--primaryBlue);
            height: 32px;
            padding: 0 12px;
            justify-content: flex-start;
            align-items: center;
            border-radius: 9999px;
            border: none;
            color: var(--background);
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            white-space: nowrap;
        }
        
        @media (min-width: 640px) {
            .deposit-btn {
                display: flex;
            }
        }
        
        .deposit-btn:hover {
            background-color: var(--primaryBlueHover);
        }
        
        .wallet-btn {
            display: flex;
            background-color: var(--primaryStroke);
            height: 32px;
            padding: 0 12px;
            gap: 8px;
            justify-content: center;
            align-items: center;
            border-radius: 9999px;
            border: none;
            color: var(--light);
            cursor: pointer;
        }
        
        .wallet-btn:hover {
            background-color: rgba(61, 64, 72, 0.8);
        }
        
        .wallet-balance {
            display: none;
        }
        
        @media (min-width: 1280px) {
            .wallet-balance {
                display: flex;
                align-items: center;
                gap: 4px;
            }
        }
        
        .wallet-separator {
            display: none;
            width: 1px;
            height: 100%;
            background-color: var(--secondaryStroke);
        }
        
        @media (min-width: 1280px) {
            .wallet-separator {
                display: block;
            }
        }
        
        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            min-width: 14px;
            height: 14px;
            padding: 0 3px;
            background-color: var(--decrease);
            border-radius: 9999px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 10px;
            color: var(--background);
            font-weight: bold;
        }
        
        @media (min-width: 640px) {
            .notification-badge {
                min-width: 16px;
                height: 16px;
                padding: 0 4px;
                font-size: 11px;
            }
        }
        
        /* Balance Panel */
        .balance-panel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--dark);
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 100;
            width: 300px;
            border: 1px solid var(--primaryStroke);
        }
        
        .balance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .balance-title {
            font-size: 16px;
            font-weight: 600;
        }
        
        .balance-amount {
            font-size: 18px;
            font-weight: 700;
        }
        
        .trade-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .trade-btn {
            flex: 1;
            padding: 8px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .buy-btn {
            background-color: var(--success);
            color: white;
        }
        
        .sell-btn {
            background-color: var(--danger);
            color: white;
        }
        
        .trade-btn:hover {
            opacity: 0.9;
        }
        
        .amount-input {
            width: 100%;
            padding: 12px 15px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--light);
            font-size: 16px;
            margin-bottom: 10px;
        }
        
        .amount-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .quick-amounts {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .quick-amount {
            flex: 1;
            padding: 8px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quick-amount:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Coin Cards */
        .coins-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .coin-card {
            background-color: var(--dark);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--primaryStroke);
            transition: transform 0.3s;
        }
        
        .coin-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .coin-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .coin-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .coin-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }
        
        .coin-name {
            font-weight: 600;
            font-size: 18px;
        }
        
        .coin-ticker {
            color: var(--gray);
            font-size: 14px;
        }
        
        .coin-price {
            font-size: 18px;
            font-weight: 700;
        }
        
        .price-change {
            font-size: 14px;
            font-weight: 600;
        }
        
        .price-change.up {
            color: var(--success);
        }
        
        .price-change.down {
            color: var(--danger);
        }
        
        .coin-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--gray);
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 16px;
            font-weight: 600;
        }
        
        .coin-description {
            font-size: 14px;
            color: var(--gray);
            margin: 15px 0;
            line-height: 1.5;
        }
        
        .social-links {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }
        
        .social-link {
            color: var(--gray);
            font-size: 16px;
            transition: color 0.2s;
        }
        
        .social-link:hover {
            color: var(--primary);
        }
        
        .coin-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-top: 15px;
        }
        
        .coin-tag {
            display: flex;
            gap: 4px;
            height: 24px;
            padding: 0 5px;
            justify-content: flex-start;
            align-items: center;
            border-radius: 9999px;
            background-color: var(--backgroundSecondary);
            border: 1px solid rgba(45, 48, 56, 0.5);
            font-size: 12px;
            font-weight: 500;
        }
        
        .tag-green {
            color: var(--primaryGreen);
        }
        
        .tag-red {
            color: var(--primaryRed);
        }
        
        /* Rest of the styles from previous version */
        .hero {
            padding: 60px 0;
            text-align: center;
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
        }
        
        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero p {
            font-size: 20px;
            color: var(--gray);
            max-width: 700px;
            margin: 0 auto 30px;
        }
        
        .create-coin-card {
            background-color: var(--dark);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 1px solid var(--primaryStroke);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            background-color: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: var(--light);
            font-size: 16px;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
            font-size: 16px;
        }
        
        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .features {
            padding: 60px 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 40px;
            font-size: 32px;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .feature-card {
            background-color: var(--dark);
            border-radius: 12px;
            padding: 30px;
            transition: transform 0.3s;
            border: 1px solid var(--primaryStroke);
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 36px;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .feature-title {
            font-size: 20px;
            margin-bottom: 15px;
        }
        
        .feature-desc {
            color: var(--gray);
        }
        
        .new-coins {
            padding: 60px 0;
            background-color: var(--dark);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: var(--dark);
            border-radius: 12px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            position: relative;
            border: 1px solid var(--primaryStroke);
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
        }
        
        .modal-title {
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        .progress-bar {
            height: 10px;
            background-color: rgba(255,255,255,0.1);
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.3s;
        }
        
        .status-message {
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .success-message {
            text-align: center;
            padding: 20px 0;
            display: none;
        }
        
        .success-icon {
            font-size: 60px;
            color: var(--success);
            margin-bottom: 20px;
        }
        
        .coin-details {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .coin-detail {
            text-align: center;
        }
        
        .detail-label {
            font-size: 14px;
            color: var(--gray);
        }
        
        .detail-value {
            font-size: 18px;
            font-weight: 600;
            margin-top: 5px;
        }
        
        .view-coin {
            display: block;
            margin-top: 30px;
            text-align: center;
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        .ticker-input {
            display: flex;
            align-items: center;
        }
        
        .ticker-input input {
            width: 80px;
            margin-right: 10px;
            text-transform: uppercase;
        }
        
        .ticker-preview {
            background-color: rgba(255,255,255,0.1);
            padding: 5px 10px;
            border-radius: 6px;
            font-weight: bold;
        }
        
        /* Image upload */
        .image-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .image-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: rgba(255,255,255,0.05);
            border: 1px dashed rgba(255,255,255,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
            overflow: hidden;
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .upload-btn {
            background-color: var(--primary);
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .upload-btn:hover {
            background-color: var(--primary-dark);
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 36px;
            }
            
            .hero p {
                font-size: 18px;
            }
            
            .coins-table {
                font-size: 14px;
            }
            
            .coins-table th, .coins-table td {
                padding: 10px 5px;
            }
        }

        /* New layout for portfolio and create coin sections */
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding: 20px;
        }

        .portfolio-column {
            flex: 1;
            min-width: 300px;
        }

        .create-coin-column {
            flex: 1;
            min-width: 300px;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo-container">
                <div class="logo-mark"></div>
                <div class="logo-type">Ape Academy</div>
            </div>
            
            <div class="nav-links">
                <a href="#" class="nav-link">Discover(SOON)</a>
                <a href="#" class="nav-link active">Pulse</a>
                <a href="#" class="nav-link">Trackers(SOON)</a>
                <a href="#" class="nav-link">Portfolio(SOON)</a>
                <a href="#" class="nav-link">Rewards(SOON)</a>
                <a href="https://x.com/ApeAcademyCoin" class="nav-link">Twitter</a>
                <a href="https://x.com/ApeAcademyCoin" class="nav-link">CA HERE</a>
            </div>
            
            <button class="search-btn">
                <i class="ri-search-2-line"></i>
                <span class="hidden 2xl:block">Search by token or CA...</span>
                <div class="search-shortcut hidden 2xl:flex">/</div>
            </button>
            
            <div class="header-actions">
                <div class="mobile-actions">
                    <button class="action-btn">
                        <i class="ri-global-line"></i>
                    </button>
                    <button class="action-btn relative">
                        <i class="ri-notification-3-line"></i>
                        <div class="notification-badge">5</div>
                    </button>
                    <button class="action-btn">
                        <i class="ri-wallet-line"></i>
                    </button>
                    <button class="action-btn">
                        <i class="ri-user-settings-line"></i>
                    </button>
                </div>
                
                <div class="desktop-actions">
                    <button class="deposit-btn">Deposit(SOON)</button>
                    <button class="action-btn">
                        <i class="ri-star-line"></i>
                    </button>
                    <button class="action-btn relative">
                        <i class="ri-notification-3-line"></i>
                        <div class="notification-badge">5</div>
                    </button>
                    <button class="wallet-btn">
                        <i class="ri-wallet-line"></i>
                        <div class="wallet-balance">
                            <span>5.00 SOL</span>
                        </div>
                        <div class="wallet-separator"></div>
                    </button>
                    <button class="action-btn">
                        <i class="ri-user-settings-line"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="main-content">
        <div class="portfolio-column">
            <section class="portfolio-section" id="portfolio">
                <h2 class="section-title">Ape Portfolio</h2>
                
                <div class="portfolio-summary">
                    <div>
                        <div style="color: var(--gray); font-size: 14px; margin-bottom: 5px;">Total Value</div>
                        <div class="portfolio-value" id="totalPortfolioValue">0.00 SOL</div>
                    </div>
                    <div>
                        <div style="color: var(--gray); font-size: 14px; margin-bottom: 5px;">Total PnL</div>
                        <div class="portfolio-pnl" id="totalPortfolioPnl">+0.00 SOL (0.00%)</div>
                    </div>
                </div>
                
                <table class="portfolio-table" id="portfolioTable">
                    <thead>
                        <tr>
                            <th>Coin</th>
                            <th>Price</th>
                            <th>Amount</th>
                            <th>Value</th>
                            <th>Invested</th>
                            <th>PnL</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="portfolioTableBody">
                        <!-- Portfolio rows will be added here by JavaScript -->
                    </tbody>
                </table>
            </section>
        </div>
        
        <div class="create-coin-column">
            <section class="hero">
                <div class="create-coin-card">
                    <h2 style="text-align: center; margin-bottom: 20px;">Ape birth</h2>
                    <div class="image-upload">
                        <div class="image-preview" id="imagePreview">
                            <i class="ri-image-line" style="font-size: 30px; color: var(--gray);"></i>
                        </div>
                        <label for="coinImage" class="upload-btn">Upload Image</label>
                        <input type="file" id="coinImage" accept="image/*" style="display: none;">
                    </div>
                    
                    <div class="form-group">
                        <label for="coinName">Coin Name</label>
                        <input type="text" id="coinName" class="form-control" placeholder="e.g. DogeCoin 2.0">
                    </div>
                    
                    <div class="form-group">
                        <label for="coinTicker">Ticker Symbol</label>
                        <div class="ticker-input">
                            <input type="text" id="coinTicker" class="form-control" placeholder="e.g. DOGE2" maxlength="5">
                            <div class="ticker-preview" id="tickerPreview">$-----</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="coinDescription">Description</label>
                        <textarea id="coinDescription" class="form-control" placeholder="Tell the world about your memecoin..." rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Social Links</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <input type="text" class="form-control" placeholder="Twitter" id="twitterLink">
                            <input type="text" class="form-control" placeholder="Telegram" id="telegramLink">
                            <input type="text" class="form-control" placeholder="Website" id="websiteLink">
                        </div>
                    </div>
                    
                    <button class="btn pulse" id="createCoinBtn">Create Memecoin (0.05 SOL)</button>
                </div>
            </section>
        </div>
    </div>
    </section>
    
    <section class="new-coins" id="new-coins">
        <div class="container">
            <h2 class="section-title">Ape Fresh </h2>
            <p style="text-align: center; color: var(--gray); margin-bottom: 20px;">New coins generated every minute</p>
            
            <div class="coins-grid" id="coinsGrid">
                <!-- Coin cards will be added here by JavaScript -->
            </div>
        </div>
    </section>
    
    <footer>
        <div class="container">
            <p>© 2025 MemeCoin Factory. This is a simulated experience only. No real tokens are created. Have fun</p>
        </div>
    </footer>
    
    <!-- Balance Panel -->
    <!-- Modified Balance Panel -->
    <div class="balance-panel">
        <div class="portfolio-balance">
            <div class="balance-row">
                <span class="balance-label">Wallet Balance</span>
                <span class="balance-value" id="walletBalanceDisplay">5.00 SOL</span>
            </div>
            <div class="balance-row">
                <span class="balance-label">Portfolio Value</span>
                <span class="balance-value" id="portfolioValueDisplay">0.00 SOL</span>
            </div>
            <div class="balance-row">
                <span class="balance-label">Total PnL</span>
                <span class="balance-value" id="totalPnlDisplay">+0.00 SOL</span>
            </div>
        </div>
        
        <div class="trade-actions">
            <button class="trade-btn buy-btn" id="buyActionBtn">Buy</button>
            <button class="trade-btn sell-btn" id="sellActionBtn">Sell</button>
        </div>
        
        <input type="number" class="amount-input" id="tradeAmount" placeholder="0.0" min="0" max="5" step="0.1">
        
        <div class="quick-amounts">
            <div class="quick-amount" data-amount="0.5">0.5</div>
            <div class="quick-amount" data-amount="1">1</div>
            <div class="quick-amount" data-amount="3">3</div>
            <div class="quick-amount" data-amount="5">5</div>
        </div>
        
        <button class="trade-btn buy-btn" id="confirmTradeBtn">Confirm Buy</button>
    </div>
    
    <div class="modal" id="creationModal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <h3 class="modal-title">Creating Your Memecoin</h3>
            
            <div id="creationProgress">
                <div class="status-message" id="statusMessage">Initializing transaction...</div>
                <div class="progress-bar">
                    <div class="progress" id="progressBar"></div>
                </div>
                
                <div class="coin-details">
                    <div class="coin-detail">
                        <div class="detail-label">Name</div>
                        <div class="detail-value" id="modalCoinName">-</div>
                    </div>
                    <div class="coin-detail">
                        <div class="detail-label">Ticker</div>
                        <div class="detail-value" id="modalCoinTicker">-</div>
                    </div>
                    <div class="coin-detail">
                        <div class="detail-label">Supply</div>
                        <div class="detail-value">1B</div>
                    </div>
                </div>
            </div>
            
            <div class="success-message" id="successMessage">
                <div class="success-icon">✓</div>
                <h3>Memecoin Created Successfully!</h3>
                <p>Your token has been deployed on Solana.</p>
                <a href="#" class="view-coin" id="viewCoinLink">View & Trade Your Coin</a>
            </div>
        </div>
    </div>
    
    <div class="modal" id="tradeModal">
        <div class="modal-content">
            <span class="close-modal" id="closeTradeModal">&times;</span>
            <h3 class="modal-title" id="tradeModalTitle">Buy Memecoin</h3>
            
            <div class="coin-info" style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                <div class="coin-icon" id="tradeCoinIcon">-</div>
                <div>
                    <div style="font-weight: 600;" id="tradeCoinName">-</div>
                    <div style="color: var(--gray); font-size: 14px;" id="tradeCoinTicker">-</div>
                </div>
            </div>
            
            <div style="margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: var(--gray);">Amount</span>
                    <span id="tradeModalAmount">0 SOL</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: var(--gray);">Price</span>
                    <span id="tradeModalPrice">0 SOL</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: var(--gray);">You receive</span>
                    <span id="tradeModalReceive">0 tokens</span>
                </div>
            </div>
            
            <button class="btn" id="confirmTradeModalBtn">Confirm</button>
        </div>
    </div>
    
<script>
    // Add these new variables at the top of your script
    let portfolio = {};
    let totalInvested = 0;
    let totalValue = 0;
    let totalPnl = 0;
    // Sample data for meme coins
    const memeNames = [
        "DogeCoin", "Shiba Inu", "PepeCoin", "Wojak", "Based", "Bonk", 
        "KarenCoin", "ElonMusk", "BitcoinButFun", "ApeTogetherStrong",
        "WAGMI", "NGMI", "FrenCoin", "MoonToken", "LamboSoon",
        "RugProof", "DiamondHands", "PaperHands", "HodlToken", "ToTheMoon"
    ];
    
    const memeAdjectives = [
        "Super", "Mega", "Ultra", "Hyper", "Quantum", "Turbo", "Atomic",
        "Epic", "Legendary", "Based", "Woke", "Dank"
    ];
    
    const memeDescriptions = [
        "The next big thing in meme economy. Don't miss out!",
        "Community-driven token with no dev tax. LFG!",
        "This is not financial advice, but we're going to the moon.",
        "100% fair launch, no presale, no whales.",
        "The meme coin that will make you rich or die trying.",
        "Just a fun project with no utility whatsoever.",
        "We have no roadmap, just vibes and memes.",
        "This time it's different. Trust me bro.",
        "The only coin you'll ever need. Probably not.",
        "We might rug, we might not. That's the thrill!"
    ];
    
    // User balance
    let userBalance = 5.00;
    let currentTradeAmount = 0;
    let currentTradeType = 'buy';
    let currentTradeCoin = null;
    
    // Add this new function to update the portfolio display
    function updatePortfolioDisplay() {
        const portfolioTableBody = document.getElementById('portfolioTableBody');
        portfolioTableBody.innerHTML = '';
        
        totalInvested = 0;
        totalValue = 0;
        totalPnl = 0;
        
        for (const ticker in portfolio) {
            const coin = portfolio[ticker];
            const currentValue = coin.amount * coin.currentPrice;
            const pnl = currentValue - coin.invested;
            const pnlPercent = (pnl / coin.invested) * 100;
            
            totalInvested += coin.invested;
            totalValue += currentValue;
            totalPnl += pnl;
            
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>
                    <div class="coin-cell">
                        <div class="coin-icon-small">${ticker.substring(0, 1)}</div>
                        <div>
                            <div style="font-weight: 600;">${coin.name}</div>
                            <div style="color: var(--gray); font-size: 14px;">${ticker}</div>
                        </div>
                    </div>
                </td>
                <td>${coin.currentPrice.toFixed(6)} SOL</td>
                <td>${coin.amount.toFixed(0)}</td>
                <td>${currentValue.toFixed(2)} SOL</td>
                <td>${coin.invested.toFixed(2)} SOL</td>
                <td class="${pnl >= 0 ? 'up' : 'down'}" style="font-weight: 600;">
                    ${pnl >= 0 ? '+' : ''}${pnl.toFixed(2)} SOL (${pnlPercent.toFixed(2)}%)
                </td>
                <td>
                    <button class="coin-action-btn coin-sell-btn" data-ticker="${ticker}">Sell</button>
                </td>
            `;
            portfolioTableBody.appendChild(row);
        }
        
        // Update summary
        const pnlPercentTotal = totalInvested > 0 ? (totalPnl / totalInvested) * 100 : 0;
        
        document.getElementById('totalPortfolioValue').textContent = totalValue.toFixed(2) + ' SOL';
        document.getElementById('totalPortfolioPnl').textContent = 
            (totalPnl >= 0 ? '+' : '') + totalPnl.toFixed(2) + ' SOL (' + pnlPercentTotal.toFixed(2) + '%)';
        document.getElementById('totalPortfolioPnl').className = totalPnl >= 0 ? 'portfolio-pnl up' : 'portfolio-pnl down';
        
        // Update balance panel
        document.getElementById('walletBalanceDisplay').textContent = userBalance.toFixed(2) + ' SOL';
        document.getElementById('portfolioValueDisplay').textContent = totalValue.toFixed(2) + ' SOL';
        document.getElementById('totalPnlDisplay').textContent = 
            (totalPnl >= 0 ? '+' : '') + totalPnl.toFixed(2) + ' SOL';
        document.getElementById('totalPnlDisplay').style.color = totalPnl >= 0 ? 'var(--success)' : 'var(--danger)';
        setInterval(fluctuatePrices, 100); // Update prices every minute
    }

        // Added price fluctuation function
    function fluctuatePrices() {
        document.querySelectorAll('.coin-card').forEach(card => {
            const currentPrice = parseFloat(card.getAttribute('data-price'));
            const changePercent = (Math.random() * 8 - 4); // -4% to +4% change
            const newPrice = currentPrice * (1 + changePercent/100);
            card.setAttribute('data-price', newPrice.toFixed(6));
            
            // Update price display
            const priceElement = card.querySelector('.coin-price');
            const changeElement = card.querySelector('.price-change');
            
            priceElement.textContent = newPrice.toFixed(6) + ' SOL';
            changeElement.textContent = (changePercent >= 0 ? '+' : '') + changePercent.toFixed(2) + '%';
            changeElement.className = `price-change ${changePercent >= 0 ? 'up' : 'down'}`;
            
            // Update portfolio if we hold this coin
            const ticker = card.getAttribute('data-ticker');
            if (portfolio[ticker]) {
                portfolio[ticker].currentPrice = newPrice;
                updatePortfolioDisplay();
            }
        });
    }
    // Updated the buy/sell logic
    function executeTrade(ticker, amount, price, isBuy) {
        const tokens = amount / price;
        
        if (isBuy) {
            userBalance -= amount;
            
            if (!portfolio[ticker]) {
                portfolio[ticker] = {
                    name: currentTradeCoin.name,
                    amount: 0,
                    invested: 0,
                    purchasePrice: price,
                    currentPrice: price
                };
            }
            
            // Calculate average purchase price
            const totalInvested = portfolio[ticker].invested + amount;
            const totalTokens = portfolio[ticker].amount + tokens;
            portfolio[ticker].purchasePrice = totalInvested / totalTokens;
            
            portfolio[ticker].amount += tokens;
            portfolio[ticker].invested += amount;
            portfolio[ticker].currentPrice = price;
        } else {
            userBalance += amount;
            portfolio[ticker].amount -= tokens;
            portfolio[ticker].invested -= (amount * (portfolio[ticker].invested / (portfolio[ticker].amount + tokens)));
            
            if (portfolio[ticker].amount <= 0) {
                delete portfolio[ticker];
            }
        }
        
        updatePortfolioDisplay();
        document.querySelector('.wallet-balance span').textContent = userBalance.toFixed(2) + ' SOL';
        document.getElementById('walletBalanceDisplay').textContent = userBalance.toFixed(2) + ' SOL';
    }
    
    // Generate random coins
    function generateRandomCoin() {
        const name = memeNames[Math.floor(Math.random() * memeNames.length)];
        const hasAdjective = Math.random() > 0.7;
        const adjective = hasAdjective ? memeAdjectives[Math.floor(Math.random() * memeAdjectives.length)] + " " : "";
        const fullName = adjective + name;
        
        // Generate ticker (3-5 letters)
        let ticker = "";
        const baseTicker = name.replace(/\s/g, '').toUpperCase().substring(0, 5);
        if (baseTicker.length >= 3) {
            ticker = baseTicker;
        } else {
            ticker = (baseTicker + "XXX").substring(0, 3);
        }
        
        // Generate random price between 0.000001 and 0.1
        const price = (Math.random() * 0.1).toFixed(6);
        
        // Generate random change (-50% to +500%)
        const change = (Math.random() * 550 - 50).toFixed(2);
        
        // Generate random volume (1 to 1000 SOL)
        const volume = (Math.random() * 1000).toFixed(2);
        
        // Calculate market cap (volume * random multiplier)
        const marketCap = (parseFloat(volume) * (Math.random() * 100 + 10)).toFixed(2);
        
        // Generate random age (1 to 59 minutes)
        const age = Math.floor(Math.random() * 59) + 1;
        
        // Generate random description
        const description = memeDescriptions[Math.floor(Math.random() * memeDescriptions.length)];
        
        // Generate random social links
        const hasTwitter = Math.random() > 0.3;
        const hasTelegram = Math.random() > 0.3;
        const hasWebsite = Math.random() > 0.5;
        
        const twitter = hasTwitter ? `https://twitter.com/${ticker.toLowerCase()}` : '';
        const telegram = hasTelegram ? `https://t.me/${ticker.toLowerCase()}` : '';
        const website = hasWebsite ? `https://${ticker.toLowerCase()}.finance` : '';
        
        // Generate random tags
        const tags = [];
        if (Math.random() > 0.5) tags.push({ icon: 'ri-user-star-line', value: Math.floor(Math.random() * 10) + '%', color: 'green' });
        if (Math.random() > 0.5) tags.push({ icon: 'icon-chef-hat', value: Math.floor(Math.random() * 5) + '%', color: 'green' });
        if (Math.random() > 0.5) tags.push({ icon: 'ri-sword-line', value: Math.floor(Math.random() * 10) + '%', color: 'red' });
        if (Math.random() > 0.5) tags.push({ icon: 'ri-ghost-line', value: Math.floor(Math.random() * 5) + '%', color: 'green' });
        
        return {
            name: fullName,
            ticker: ticker,
            price: price,
            change: change,
            volume: volume,
            marketCap: marketCap,
            age: age + "m",
            description: description,
            twitter: twitter,
            telegram: telegram,
            website: website,
            tags: tags
        };
    }
    
    // Create coin card HTML
    function createCoinCard(coin) {
        return `
            <div class="coin-card" data-ticker="${coin.ticker}" data-price="${coin.price}">
                <div class="coin-header">
                    <div class="coin-info">
                        <div class="coin-icon">${coin.ticker.substring(0, 1)}</div>
                        <div>
                            <div class="coin-name">${coin.name}</div>
                            <div class="coin-ticker">${coin.ticker}</div>
                        </div>
                    </div>
                    <div>
                        <div class="coin-price">${coin.price} SOL</div>
                        <div class="price-change ${parseFloat(coin.change) >= 0 ? 'up' : 'down'}">
                            ${parseFloat(coin.change) >= 0 ? '+' : ''}${coin.change}%
                        </div>
                    </div>
                </div>
                
                <div class="coin-stats">
                    <div class="stat-item">
                        <div class="stat-label">Volume</div>
                        <div class="stat-value">${coin.volume} SOL</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Market Cap</div>
                        <div class="stat-value">${coin.marketCap} SOL</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Age</div>
                        <div class="stat-value">${coin.age}</div>
                    </div>
                </div>
                
                <div class="coin-description">${coin.description}</div>
                
                <div class="coin-actions">
                    <button class="coin-action-btn coin-buy-btn" data-ticker="${coin.ticker}">Buy</button>
                    <button class="coin-action-btn coin-sell-btn" data-ticker="${coin.ticker}">Sell</button>
                </div>
                
                ${coin.twitter || coin.telegram || coin.website ? `
                <div class="social-links">
                    ${coin.twitter ? `<a href="${coin.twitter}" target="_blank" class="social-link"><i class="ri-twitter-line"></i></a>` : ''}
                    ${coin.telegram ? `<a href="${coin.telegram}" target="_blank" class="social-link"><i class="ri-telegram-line"></i></a>` : ''}
                    ${coin.website ? `<a href="${coin.website}" target="_blank" class="social-link"><i class="ri-global-line"></i></a>` : ''}
                </div>
                ` : ''}
                
                ${coin.tags.length > 0 ? `
                <div class="coin-tags">
                    ${coin.tags.map(tag => `
                        <div class="coin-tag tag-${tag.color}">
                            <i class="${tag.icon}"></i>
                            <span>${tag.value}</span>
                        </div>
                    `).join('')}
                </div>
                ` : ''}
            </div>
        `;
    }
    
    // Populate coins grid
    function populateCoinsGrid() {
        const coinsGrid = document.getElementById('coinsGrid');
        coinsGrid.innerHTML = '';
        
        // Generate 12 random coins
        for (let i = 0; i < 12; i++) {
            const coin = generateRandomCoin();
            const card = createCoinCard(coin);
            coinsGrid.insertAdjacentHTML('beforeend', card);
        }
        
        // Add click event to all coin cards
        document.querySelectorAll('.coin-card').forEach(card => {
            card.addEventListener('click', function(e) {
                // Only open modal if clicking on the card itself, not buttons
                if (!e.target.classList.contains('coin-buy-btn') && !e.target.classList.contains('coin-sell-btn')) {
                    const ticker = this.getAttribute('data-ticker');
                    const price = this.getAttribute('data-price');
                    const name = this.querySelector('.coin-name').textContent;
                    
                    // Set trade modal info
                    document.getElementById('tradeModalTitle').textContent = `Buy ${ticker}`;
                    document.getElementById('tradeCoinIcon').textContent = ticker.substring(0, 1);
                    document.getElementById('tradeCoinName').textContent = name;
                    document.getElementById('tradeCoinTicker').textContent = ticker;
                    
                    // Store current trade coin
                    currentTradeCoin = {
                        ticker: ticker,
                        name: name,
                        price: price
                    };
                    
                    // Update trade modal values
                    updateTradeModalValues();
                    
                    // Show trade modal
                    document.getElementById('tradeModal').style.display = 'flex';
                }
            });
        });
    }
    
    // Update trade modal values based on current amount
    function updateTradeModalValues() {
        if (!currentTradeCoin) return;
        
        const amount = parseFloat(document.getElementById('tradeAmount').value) || 0;
        const price = parseFloat(currentTradeCoin.price);
        
        document.getElementById('tradeModalAmount').textContent = amount.toFixed(2) + ' SOL';
        document.getElementById('tradeModalPrice').textContent = price.toFixed(6) + ' SOL';
        
        if (price > 0) {
            const tokens = amount / price;
            document.getElementById('tradeModalReceive').textContent = tokens.toFixed(0) + ' ' + currentTradeCoin.ticker;
        } else {
            document.getElementById('tradeModalReceive').textContent = '0 ' + currentTradeCoin.ticker;
        }
    }
    
    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
        populateCoinsGrid();
        
        // Update ticker preview
        document.getElementById('coinTicker').addEventListener('input', function() {
            const ticker = this.value.toUpperCase();
            document.getElementById('tickerPreview').textContent = '$' + (ticker || '-----').padEnd(5, '-').substring(0, 5);
        });
        
        // Image upload
        document.getElementById('coinImage').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const preview = document.getElementById('imagePreview');
                    preview.innerHTML = `<img src="${event.target.result}" alt="Coin Image">`;
                };
                reader.readAsDataURL(file);
            }
        });
        
        // Create coin button
        document.getElementById('createCoinBtn').addEventListener('click', function() {
            const coinName = document.getElementById('coinName').value.trim();
            const coinTicker = document.getElementById('coinTicker').value.trim().toUpperCase();
            const coinDescription = document.getElementById('coinDescription').value.trim();
            
            if (!coinName || !coinTicker) {
                alert('Please enter both a coin name and ticker symbol');
                return;
            }
            
            if (coinTicker.length < 3 || coinTicker.length > 5) {
                alert('Ticker symbol must be between 3 and 5 characters');
                return;
            }
            
            // Show creation modal
            const modal = document.getElementById('creationModal');
            document.getElementById('modalCoinName').textContent = coinName;
            document.getElementById('modalCoinTicker').textContent = coinTicker;
            modal.style.display = 'flex';
            
            // Simulate creation process
            simulateCreationProcess();
        });
        
        // Close creation modal
        document.getElementById('closeModal').addEventListener('click', function() {
            document.getElementById('creationModal').style.display = 'none';
        });
        
        // Close trade modal
        document.getElementById('closeTradeModal').addEventListener('click', function() {
            document.getElementById('tradeModal').style.display = 'none';
        });
        
        // View coin link
        document.getElementById('viewCoinLink').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('creationModal').style.display = 'none';
            
            // Scroll to coins table
            document.getElementById('new-coins').scrollIntoView({
                behavior: 'smooth'
            });
        });
        
        // Trade action buttons
        document.getElementById('buyActionBtn').addEventListener('click', function() {
            currentTradeType = 'buy';
            this.classList.add('active');
            document.getElementById('sellActionBtn').classList.remove('active');
            document.getElementById('confirmTradeBtn').textContent = 'Confirm Buy';
            document.getElementById('confirmTradeBtn').className = 'trade-btn buy-btn';
        });
        
        document.getElementById('sellActionBtn').addEventListener('click', function() {
            currentTradeType = 'sell';
            this.classList.add('active');
            document.getElementById('buyActionBtn').classList.remove('active');
            document.getElementById('confirmTradeBtn').textContent = 'Confirm Sell';
            document.getElementById('confirmTradeBtn').className = 'trade-btn sell-btn';
        });
        
        // Quick amount buttons
        document.querySelectorAll('.quick-amount').forEach(button => {
            button.addEventListener('click', function() {
                const amount = parseFloat(this.getAttribute('data-amount'));
                document.getElementById('tradeAmount').value = amount;
                updateTradeModalValues();
            });
        });
        
        // Trade amount input
        document.getElementById('tradeAmount').addEventListener('input', function() {
            updateTradeModalValues();
        });
        
        // Add click handlers for coin card buy/sell buttons
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('coin-buy-btn') || e.target.classList.contains('coin-sell-btn')) {
                const ticker = e.target.getAttribute('data-ticker');
                const card = e.target.closest('.coin-card');
                const price = parseFloat(card.getAttribute('data-price'));
                const name = card.querySelector('.coin-name').textContent;
                
                // Set trade type
                currentTradeType = e.target.classList.contains('coin-buy-btn') ? 'buy' : 'sell';
                
                // Update UI to reflect trade type
                if (currentTradeType === 'buy') {
                    document.getElementById('buyActionBtn').classList.add('active');
                    document.getElementById('sellActionBtn').classList.remove('active');
                    document.getElementById('confirmTradeBtn').textContent = 'Confirm Buy';
                    document.getElementById('confirmTradeBtn').className = 'trade-btn buy-btn';
                } else {
                    document.getElementById('sellActionBtn').classList.add('active');
                    document.getElementById('buyActionBtn').classList.remove('active');
                    document.getElementById('confirmTradeBtn').textContent = 'Confirm Sell';
                    document.getElementById('confirmTradeBtn').className = 'trade-btn sell-btn';
                }
                
                // Set trade modal info
                document.getElementById('tradeModalTitle').textContent = 
                    currentTradeType === 'buy' ? `Buy ${ticker}` : `Sell ${ticker}`;
                document.getElementById('tradeCoinIcon').textContent = ticker.substring(0, 1);
                document.getElementById('tradeCoinName').textContent = name;
                document.getElementById('tradeCoinTicker').textContent = ticker;
                
                // Store current trade coin
                currentTradeCoin = {
                    ticker: ticker,
                    name: name,
                    price: price
                };
                
                // Update trade modal values
                updateTradeModalValues();
                
                // Show trade modal
                document.getElementById('tradeModal').style.display = 'flex';
            }
        });

        

                // Confirm trade modal button
        document.getElementById('confirmTradeModalBtn').addEventListener('click', function() {
            const amount = parseFloat(document.getElementById('tradeAmount').value) || 0;
            
            if (amount <= 0) {
                alert('Please enter a valid amount');
                return;
            }
            
            if (currentTradeType === 'buy' && amount > userBalance) {
                alert('Insufficient balance');
                return;
            }
            
            if (!currentTradeCoin) {
                alert('No coin selected');
                return;
            }
            
            const price = parseFloat(currentTradeCoin.price);
            const tokens = amount / price;
            
            if (currentTradeType === 'buy') {
                // Buy transaction
                userBalance -= amount;
                
                // Update portfolio
                if (!portfolio[currentTradeCoin.ticker]) {
                    portfolio[currentTradeCoin.ticker] = {
                        name: currentTradeCoin.name,
                        amount: 0,
                        invested: 0,
                        currentPrice: price
                    };
                }
                
                portfolio[currentTradeCoin.ticker].amount += tokens;
                portfolio[currentTradeCoin.ticker].invested += amount;
                portfolio[currentTradeCoin.ticker].currentPrice = price;
                
                alert(`Successfully bought ${tokens.toFixed(0)} ${currentTradeCoin.ticker} for ${amount.toFixed(2)} SOL`);
            } else {
                // Sell transaction
                if (!portfolio[currentTradeCoin.ticker] || portfolio[currentTradeCoin.ticker].amount < tokens) {
                    alert(`You don't have enough ${currentTradeCoin.ticker} to sell`);
                    return;
                }
                
                userBalance += amount;
                
                // Update portfolio
                portfolio[currentTradeCoin.ticker].amount -= tokens;
                portfolio[currentTradeCoin.ticker].invested -= (amount * (portfolio[currentTradeCoin.ticker].invested / (portfolio[currentTradeCoin.ticker].amount + tokens)));
                
                // Remove from portfolio if amount is zero
                if (portfolio[currentTradeCoin.ticker].amount <= 0) {
                    delete portfolio[currentTradeCoin.ticker];
                }
                
                alert(`Successfully sold ${tokens.toFixed(0)} ${currentTradeCoin.ticker} for ${amount.toFixed(2)} SOL`);
            }
            
            // Update displays
            updatePortfolioDisplay();
            document.querySelector('.wallet-balance span').textContent = userBalance.toFixed(2) + ' SOL';
            document.getElementById('walletBalanceDisplay').textContent = userBalance.toFixed(2) + ' SOL';
            
            // Close modal
            document.getElementById('tradeModal').style.display = 'none';
            
            // Reset amount
            document.getElementById('tradeAmount').value = '';
        });
        
        // Confirm trade button
        document.getElementById('confirmTradeBtn').addEventListener('click', function() {
            const amount = parseFloat(document.getElementById('tradeAmount').value) || 0;
            
            if (amount <= 0) {
                alert('Please enter a valid amount');
                return;
            }
            
            if (currentTradeType === 'buy' && amount > userBalance) {
                alert('Insufficient balance');
                return;
            }
            
            const price = parseFloat(currentTradeCoin.price);
            const tokens = amount / price;
            
            if (currentTradeType === 'buy') {
                // Buy transaction
                userBalance -= amount;
                
                // Update portfolio
                if (!portfolio[currentTradeCoin.ticker]) {
                    portfolio[currentTradeCoin.ticker] = {
                        name: currentTradeCoin.name,
                        amount: 0,
                        invested: 0,
                        currentPrice: price
                    };
                }
                
                portfolio[currentTradeCoin.ticker].amount += tokens;
                portfolio[currentTradeCoin.ticker].invested += amount;
                portfolio[currentTradeCoin.ticker].currentPrice = price;
                
                alert(`Successfully bought ${tokens.toFixed(0)} ${currentTradeCoin.ticker} for ${amount.toFixed(2)} SOL`);
            } else {
                // Sell transaction
                if (!portfolio[currentTradeCoin.ticker] || portfolio[currentTradeCoin.ticker].amount < tokens) {
                    alert(`You don't have enough ${currentTradeCoin.ticker} to sell`);
                    return;
                }
                
                userBalance += amount;
                
                // Update portfolio
                portfolio[currentTradeCoin.ticker].amount -= tokens;
                portfolio[currentTradeCoin.ticker].invested -= (amount * (portfolio[currentTradeCoin.ticker].invested / (portfolio[currentTradeCoin.ticker].amount + tokens)));
                
                // Remove from portfolio if amount is zero
                if (portfolio[currentTradeCoin.ticker].amount <= 0) {
                    delete portfolio[currentTradeCoin.ticker];
                }
                
                alert(`Successfully sold ${tokens.toFixed(0)} ${currentTradeCoin.ticker} for ${amount.toFixed(2)} SOL`);
            }
            
            // Update displays
            updatePortfolioDisplay();
            document.querySelector('.balance-amount').textContent = userBalance.toFixed(2) + ' SOL';
            document.querySelector('.wallet-balance span').textContent = userBalance.toFixed(2) + ' SOL';
            
            // Close modal
            document.getElementById('tradeModal').style.display = 'none';
        });
        
        // Update coins every minute
        setInterval(populateCoinsGrid, 60000);
        
        // Initialize portfolio display
        updatePortfolioDisplay();
    });
    
    // Simulate the coin creation process
    function simulateCreationProcess() {
        const progressBar = document.getElementById('progressBar');
        const statusMessage = document.getElementById('statusMessage');
        const creationProgress = document.getElementById('creationProgress');
        const successMessage = document.getElementById('successMessage');
        
        // Reset UI
        progressBar.style.width = '0%';
        creationProgress.style.display = 'block';
        successMessage.style.display = 'none';
        
        // Simulate steps
        const steps = [
            {progress: 10, message: "Initializing transaction..."},
            {progress: 25, message: "Approving wallet connection..."},
            {progress: 40, message: "Creating token metadata..."},
            {progress: 60, message: "Deploying smart contract..."},
            {progress: 80, message: "Setting up bonding curve..."},
            {progress: 95, message: "Finalizing on Solana blockchain..."},
            {progress: 100, message: "Done!"}
        ];
        
        let currentStep = 0;
        
        function processNextStep() {
            if (currentStep < steps.length) {
                const step = steps[currentStep];
                progressBar.style.width = step.progress + '%';
                statusMessage.textContent = step.message;
                currentStep++;
                
                // Random delay between steps (300-1000ms)
                setTimeout(processNextStep, 300 + Math.random() * 700);
            } else {
                // Show success message
                creationProgress.style.display = 'none';
                successMessage.style.display = 'block';
                
                // Add the new coin to the grid
                const coinName = document.getElementById('modalCoinName').textContent;
                const coinTicker = document.getElementById('modalCoinTicker').textContent;
                const coinDescription = document.getElementById('coinDescription').value.trim();
                const twitterLink = document.getElementById('twitterLink').value.trim();
                const telegramLink = document.getElementById('telegramLink').value.trim();
                const websiteLink = document.getElementById('websiteLink').value.trim();
                
                const newCoin = {
                    name: coinName,
                    ticker: coinTicker,
                    price: '0.000001',
                    change: '0.00',
                    volume: '0.00',
                    marketCap: '0.00',
                    age: '0m',
                    description: coinDescription || "A brand new memecoin ready to moon!",
                    twitter: twitterLink,
                    telegram: telegramLink,
                    website: websiteLink,
                    tags: []
                };
                
                // Add to the grid
                const coinsGrid = document.getElementById('coinsGrid');
                coinsGrid.insertAdjacentHTML('afterbegin', createCoinCard(newCoin));
                
                // Reset form
                document.getElementById('coinName').value = '';
                document.getElementById('coinTicker').value = '';
                document.getElementById('coinDescription').value = '';
                document.getElementById('twitterLink').value = '';
                document.getElementById('telegramLink').value = '';
                document.getElementById('websiteLink').value = '';
                document.getElementById('imagePreview').innerHTML = '<i class="ri-image-line" style="font-size: 30px; color: var(--gray);"></i>';
                
                // Deduct creation fee
                userBalance -= 0.05;
                document.querySelector('.balance-amount').textContent = userBalance.toFixed(2) + ' SOL';
                document.querySelector('.wallet-balance span').textContent = userBalance.toFixed(2) + ' SOL';
                
                // Update portfolio display
                updatePortfolioDisplay();
            }
        }
        
        // Start the process
        processNextStep();
    }
</script>
</body>
</html>